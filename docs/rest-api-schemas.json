{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mhuxd.local/api/v1/schemas",
  "title": "mhuxd REST API Schemas",
  "type": "object",
  "definitions": {
    "Metadata": {
      "$id": "https://mhuxd.local/api/v1/schemas/metadata",
      "type": "object",
      "required": ["rigtypes", "devices"],
      "properties": {
        "rigtypes": {
          "type": "array",
          "items": {"$ref": "#/$defs/RigType"}
        },
        "devicetypes": {
          "type": "array",
          "items": {"$ref": "#/$defs/DeviceType"}
        }
      },
      "additionalProperties": false
    },
    "Runtime": {
      "$id": "https://mhuxd.local/api/v1/schemas/runtime",
      "type": "object",
      "required": ["daemon", "hostname"],
      "properties": {
        "daemon": {
          "type": "object",
          "required": ["name", "version", "logfile", "pid", "uptimeSec"],
          "properties": {
            "name": {"type": "string"},
            "version": {"type": "string"},
            "logfile": {"type": "string"},
            "pid": {"type": "integer"},
            "uptimeSec": {"type": "integer", "minimum": 0}
          },
          "additionalProperties": false
        },
        "hostname": {"type": "string"}
      },
      "additionalProperties": false
    },
    "Keyers": {
      "$id": "https://mhuxd.local/api/v1/schemas/keyers",
      "type": "object",
      "required": ["keyers"],
      "properties": {
        "keyers": {
          "type": "array",
          "items": {"$ref": "#/$defs/Keyer"}
        }
      },
      "additionalProperties": false
    },
    "Config": {
      "$id": "https://mhuxd.local/api/v1/schemas/config",
      "type": "object",
      "required": ["daemon", "keyers"],
      "properties": {
        "daemon": {
          "type": "object",
          "required": ["loglevel"],
          "properties": {
            "loglevel": {"type": "string"}
          },
          "additionalProperties": true
        },
        "keyers": {
          "type": "array",
          "items": {"$ref": "#/$defs/ConfigKeyer"}
        }
      },
      "additionalProperties": false
    },
    "Devices": {
      "$id": "https://mhuxd.local/api/v1/schemas/devices",
      "type": "array",
      "items": {"$ref": "#/$defs/DeviceType"}
    }
  },
  "$defs": {
    "RigType": {
      "type": "object",
      "required": ["id", "name", "icomAddr"],
      "properties": {
        "id": {"type": "integer"},
        "name": {"type": "string"},
        "icomAddr": {"type": "integer", "minimum": 0}
      },
      "additionalProperties": false
    },
    "Keyer": {
      "type": "object",
      "required": ["serial", "info", "flags"],
      "properties": {
        "serial": {"type": "string"},
        "info": {
          "type": "object",
          "required": ["type", "name", "status"],
          "properties": {
            "type": {"type": "integer"},
            "name": {"type": "string"},
            "status": {"type": "string"},
            "verFwMajor": {"type": "integer"},
            "verFwMinor": {"type": "integer"},
            "verWinkey": {"type": "integer"}
          },
          "additionalProperties": true
        },
        "flags": {
          "type": "object",
          "additionalProperties": {"type": "boolean"}
        }
      },
      "additionalProperties": false
    },
    "ConfigKeyer": {
      "type": "object",
      "required": ["serial", "type"],
      "properties": {
        "serial": {"type": "string"},
        "type": {"type": "integer"},
        "channel": {"type": "object"},
        "param": {"type": "object"},
        "winkey": {"type": "object"},
        "cwMessages": {
          "type": "array",
          "items": {"$ref": "#/$defs/Message"}
        },
        "fskMessages": {
          "type": "array",
          "items": {"$ref": "#/$defs/Message"}
        },
        "sm": {"type": "object"}
      },
      "additionalProperties": true
    },
    "Message": {
      "type": "object",
      "required": ["index", "text"],
      "properties": {
        "index": {"type": "integer", "minimum": 1},
        "text": {"type": "string"}
      },
      "additionalProperties": false
    },
    "DeviceType": {
      "type": "object",
      "required": ["type", "name", "flags"],
      "properties": {
        "type": {"type": "integer"},
        "name": {"type": "string"},
        "flags": {
          "type": "array",
          "items": {"type": "string"}
        }
      },
      "additionalProperties": false
    }
  }
}
